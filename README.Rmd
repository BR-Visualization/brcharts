---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
devtools::load_all()
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# brcharts

<!-- badges: start -->

![GitHub forks](https://img.shields.io/github/forks/BR-Visualization/brcharts?style=social)
![GitHub Repo stars](https://img.shields.io/github/stars/BR-Visualization/brcharts?style=social)

![GitHub contributors](https://img.shields.io/github/contributors/BR-Visualization/brcharts)
![GitHub last commit](https://img.shields.io/github/last-commit/BR-Visualization/brcharts)
![GitHub pull requests](https://img.shields.io/github/issues-pr/BR-Visualization/brcharts)
[![Project Status: Active â€“ The project has reached a stable, usable state and is being actively developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![Downloads](https://img.shields.io/github/downloads/BR-Visualization/brcharts/latest/total)](https://tooomm.github.io/github-release-stats/?username=insightsengineering\&repository=r.pkg.template)
[![Current Version](https://img.shields.io/github/r-package/v/BR-Visualization/brcharts/main?color=purple\&label=package%20version)](https://github.com/BR-Visualization/brcharts/tree/main)
[![Open Issues](https://img.shields.io/github/issues-raw/BR-Visualization/brcharts?color=red\&label=open%20issues)](https://github.com/BR-Visualization/brcharts/issues?q=is%3Aissue+is%3Aopen+sort%3Aupdated-desc)
[![Check URLs](https://github.com/BR-Visualization/brcharts/actions/workflows/links.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/links.yaml)
[![Coverage](https://github.com/BR-Visualization/brcharts/actions/workflows/test-coverage.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/test-coverage.yaml)
[![License report](https://github.com/BR-Visualization/brcharts/actions/workflows/licenses.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/licenses.yaml)
[![Pkgdown Docs](https://github.com/BR-Visualization/brcharts/actions/workflows/pkgdown.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/pkgdown.yaml)
[![R CMD Check](https://github.com/BR-Visualization/brcharts/actions/workflows/build-check-install.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/build-check-install.yaml)
[![Release](https://github.com/BR-Visualization/brcharts/actions/workflows/release.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/release.yaml)
[![Spelling](https://github.com/BR-Visualization/brcharts/actions/workflows/spelling.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/spelling.yaml)
[![Style](https://github.com/BR-Visualization/brcharts/actions/workflows/style.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/style.yaml)
[![SuperLinter](https://github.com/BR-Visualization/brcharts/actions/workflows/linter.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/linter.yaml)
[![Version bump](https://github.com/BR-Visualization/brcharts/actions/workflows/version-bump.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/version-bump.yaml)
[![Version check](https://github.com/BR-Visualization/brcharts/actions/workflows/version.yaml/badge.svg)](https://github.com/BR-Visualization/brcharts/actions/workflows/version.yaml)
<!-- badges: end -->

The goal of brcharts is to create benefit-risk charts in the publication: Colopy MW, Gakava L, Chen C. Planning Benefit-Risk Assessments Using Visualizations. Ther Innov Regul Sci. 2023 Nov;57(6):1123-1135. doi: 10.1007/s43441-023-00563-9. Epub 2023 Sep 8. PMID: 37682462.

## Installation

You can install the development version of brcharts from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("BR-Visualization/brcharts")
```

## Figure 2 - Demographics (Pyramid Chart)

```{r pyramid_plot, echo = FALSE}
demography |>
  dplyr::mutate(
    Type = as.factor(paste0("Type ", Type)),
    figprev = ifelse(
      Gender == "Females", -1 * Prevalence / 100000, Prevalence / 100000
    ),
    Sex = Gender
  ) |>
  pyramid_chart(
    levelvar = "Type", xvar = "figprev", yvar = "Age",
    groupvar = "Sex", alpha_set = 0.7, chartcolors = colfun()$fig2_colors,
    xlab = "Prevalence (x 100 000)"
  )
```

## Figure 4 - Comorbidities (Grouped Bar Chart)

```{r grouped_barchart, echo = FALSE}
grouped_barchart(
  data = comorbidities, xvar = "Comorbidities",
  yvar = "Prevalence", groupvar = "Severity",
  chartcolors = colfun()$fig4_colors
)
```
